name: Publishing to maven

on:
  release:

jobs:
  build:

    runs-on: ubuntu-latest
    steps:
      -   uses: actions/checkout@v4
      -   name: Set up JDK 17
          uses: actions/setup-java@v4
          with:
            java-version: '17'
            distribution: 'corretto'

      -   name: Publish package
          run: mvn --batch-mode clean deploy -P central-deploy -DskipTests=true
          env:
            MAVEN_USERNAME: ${{ secrets.OSS_SONATYPE_USERNAME }}
            MAVEN_PASSWORD: ${{ secrets.OSS_SONATYPE_PASSWORD }}
            MAVEN_GPG_PASSPHRASE: ${{ secrets.MAVEN_GPG_PASSPHRASE }}
